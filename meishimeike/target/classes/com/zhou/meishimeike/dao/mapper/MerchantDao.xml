<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org/DTD Mapper 3.0"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zhou.meishimeike.dao.MerchantDao">
		
		
		<select id="hasMerchant" resultType="boolean">
			select count(m_id) from merchant where m_phone=#{param1}  and m_pass=#{param2}
		</select>
		
		<insert id="addMerchant">
			INSERT INTO merchant(m_phone,m_name,m_pass) values(#{param1},#{param1},#{param2})
		</insert> 
		
		
		<insert id="addMerchantInfo">
			INSERT INTO merchant_info 
			values(default,#{mId},
			#{phone},#{name},#{mType},
			#{mImgIdCar},#{mImgIndoor},
			#{mLogo},#{mAppearance},#{mPermission},
			#{mImgLicense},#{mLng},#{mLat},#{mName})
		</insert>
		
		<select id="hasMerchantByPhone" resultType="boolean">
			select count(m_id) from merchant where m_phone=#{param1}
		</select>
		
		
		<select id="selectCodeByPhone" resultType="int">
			select m_code from merchant where m_phone=#{param1}
		</select>
		
		<select id="getIdByPhone" resultType="int">
			select m_id from merchant where m_phone=#{param1}
		</select>
		
		<update id="updateCodeById">
			update merchant set m_code=1 where m_id=#{param1}
		</update>
</mapper>